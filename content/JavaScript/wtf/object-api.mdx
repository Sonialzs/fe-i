---
title: 'å¯¹è±¡ API'
slug: 'object-api'
date: '2020-11-25'
category: 'JavaScript'
index: 9
authors:
    - cuvii
authorsUrl:
    - https://fei.kodin.fun
draft: false
---

## æž„é€ å‡½æ•°

`Object()`å½“ä½œæž„é€ å‡½æ•°ä½¿ç”¨æ—¶ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š

1.  å¦‚æžœå‚æ•°æ˜¯ `null` æˆ–è€… `undefined` æˆ–è€…ä¸ä¼ å…¥å‚æ•°ï¼Œä¼šè¿”å›žä¸€ä¸ªç©ºå¯¹è±¡ã€‚

```js
Object(null); // {}
Object(undefined); // {}
Object(); // {}
```

2.  å¦åˆ™è¿”å›žä¸€ä¸ªå‚æ•°ç›¸åŒç±»åž‹çš„å¯¹è±¡ã€‚æˆ–è€…è¯´åŒ…è£…åŽçš„å¯¹è±¡ã€‚

```js
Object(1); // Number(1)
Object(NaN); // Number(NaN) NaNä¹Ÿæ˜¯æ•°å­—å—·
Object('str'); // String('str')
Object(true); // Boolean(true)
```

1.  å¦‚æžœå‚æ•°å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ç›´æŽ¥è¿”å›žå‚æ•°ã€‚

```js run
const arr = [1, 2, 3];
const fn = function () {};
const obj = {};

console.log(Object(arr) === arr);
console.log(Object(fn) === fn);
console.log(Object(obj) === obj);
```

## é™æ€æ–¹æ³•

### ðŸ”¥`Object.assign()`

`Object.assign()`æ–¹æ³•å°†ä¸¤ä¸ªå¯¹è±¡çš„**å¯éåŽ†**ã€**è‡ªèº«å±žæ€§**åˆå¹¶ã€‚

é€šè¿‡ `Object.prototype.propertyIsEnumerable()`æ¥æ£€æµ‹å±žæ€§æ˜¯ä¸æ˜¯å¯éåŽ†çš„ã€‚

é€šè¿‡ `Object.prototype.hasOwnProperty()`æ¥æ£€æµ‹æ˜¯ä¸æ˜¯è‡ªèº«å±žæ€§ã€‚

```js run
const o1 = {
	name: 'cuvii',
	age: 23,
};

const o2 = {
	count: 2,
	sum: 3,
};

Object.defineProperty(o2, 'total', {
	enumerable: false,
	value: 666,
});

console.log(Object.assign(o1, o2));
```

ðŸ‘† ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œè®¾ç½® enumerable çš„å±žæ€§ total å°±æ²¡æœ‰åˆå¹¶åˆ°æ–°çš„å¯¹è±¡ä¸­åŽ»ã€‚

### ðŸ”¥`Object.create()`

`Object.create()`æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ª**æ–°çš„å¯¹è±¡**ï¼Œæ–°å¯¹è±¡ä¼šå°†å‚æ•°ä½œä¸ºåŽŸåž‹ã€‚

```js run
const cuvii = { name: 'cuvii', age: 23 };

const lilith = Object.create(cuvii);

console.log(lilith);
console.log(lilith.__proto__ === cuvii);
```

ðŸ‘† ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œ`lilith` æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œä¸”`__proto__`ç›´æŽ¥æŒ‡å‘äº† `cuvii`ã€‚

å¦‚æžœä¸ä¼ å…¥å‚æ•°æˆ–è€…ä¼ å…¥ undefinedï¼Œæ˜¯ä¼šæŠ¥é”™çš„å—·ï¼ä¸è¿‡å¯ä»¥å°† null ä½œä¸ºå‚æ•°ï¼Œæ–°å¯¹è±¡ä¼šæ²¡æœ‰`__proto__`å±žæ€§ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åŽŸåž‹ã€‚

```js run
const obj = Object.create(null);

console.log(obj.__proto__ === undefined); // true
```

### ðŸ”¥`Object.defineProperty()`

`Object.defineProperty`æ–¹æ³•å¯ä»¥åœ¨å¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±žæ€§ï¼Œæˆ–è€…ä¿®æ”¹å·²æœ‰çš„å±žæ€§ã€‚å’Œç›´æŽ¥åœ¨å¯¹è±¡ä¸Šæ·»åŠ å±žæ€§ä¸åŒï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥å¯¹å±žæ€§è¿›è¡Œé…ç½®ã€‚

```js run
const o = {
	name: 'cuvii',
};

// å°†o.nameå˜ä¸ºä¸å¯å†™
Object.defineProperty(o, 'name', {
	writable: false,
});

// è¿™è¡Œä»£ç ä¸ä¼šä¿®æ”¹nameçš„å€¼ï¼Œä¹Ÿä¸ä¼šæŠ¥é”™ã€‚
o.name = 'lilith';

console.log(o.name); // "cuvii"

// æ·»åŠ ä¸€ä¸ªo.ageå±žæ€§ï¼Œå€¼ä¸º23
Object.defineProperty(o, 'age', {
	writable: false,
	value: 23,
});

console.log(o.age); // 23
```

é™¤äº† 4 ä¸ªå¯é…ç½®ç‰¹æ€§`configurable`,`enumerable`,`wrtiable`,`value`ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é…ç½® `getter` å’Œ `setter`ã€‚
Vue 2 ä¸­çš„å“åº”å¼å°±æ˜¯é€šè¿‡ `getter` å’Œ `setter` å®žçŽ°çš„ã€‚é¡ºå¸¦ä¸€æï¼ŒVue3 æ˜¯ä½¿ç”¨`Proxy`ã€‚

```js run
const bank = {
	_money: 80,
};

Object.defineProperty(bank, 'account', {
	get() {
		return `ä½™é¢æ˜¯${bank._money}`;
	},
	set(value) {
		const result = this.money + value;
		bank._money = result >= 0 ? result : 0;
	},
});

console.log(bank.account);
bank.account = -1;
console.log(bank.account);
```

ðŸ‘† ä»£ç ä¸­ï¼Œä¸º `bank` å¯¹è±¡å®šä¹‰äº†ä¸€ä¸ª `account` å±žæ€§ï¼Œå¹¶è®¾ç½®äº† `getter`ï¼Œè°ƒç”¨æ—¶ä¼šè¿”å›žä¸€æ®µå­—ç¬¦ä¸²ï¼Œåœ¨ `setter` ä¸­é™åˆ¶ `money` æœ€å°ä¸º 0ã€‚

### `Object.defineProperties()`

`Object.defineProperties()`æ–¹æ³•æ”¯æŒå®šä¹‰å¤šä¸ªå±žæ€§ã€‚

```js
const o = {};

Object.defineProperties(o, {
	name: {
		value: 'lilith',
		writable: false,
	},

	age: {
		value: 18,
		writable: false,
	},
});
```

### ðŸ”¥`Object.entires()`

`Object.entires()`ä¼šä»¥æ•°ç»„å½¢å¼è¿”å›žå¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å¯éåŽ†é”®å€¼å¯¹ï¼Œä¸ä¿è¯é¡ºåºã€‚

> for...in å¾ªçŽ¯ä¹Ÿå¯ä»¥éåŽ†å¯¹è±¡çš„é”®ï¼Œä½†ä¼šåŒ…æ‹¬åŽŸåž‹é“¾ä¸Šçš„æ‰€æœ‰é”®ã€‚

```js
const book = {
	name: 'ä¸‰å›½æ¼”ä¹‰',
	author: 'ç½—è´¯ä¸­',
	summary: 'åŽ†å²å°è¯´',
	rate: 5.0,
};

console.log(Object.entries(book));
```

è¾“å‡ºç»“æžœä¸ºï¼š

```js
[
	['name', 'ä¸‰å›½æ¼”ä¹‰'],
	['author', 'ç½—è´¯ä¸­'],
	['summary', 'åŽ†å²å°è¯´'],
	['rate', 5],
];
```

### `Object.freeze()`

```js run
const obj = {
	price: 15,
};

Object.freeze(obj);

obj.price = 10;
obj.id = '1';
console.log(obj);
```

### ðŸ”¥`Object.fromEntries()`

`Object.fromEntries()`æ–¹æ³•å°†å¯è¿­ä»£çš„é”®å€¼å¯¹é›†åˆè½¬æ¢æˆå¯¹è±¡ã€‚

å¯è¿­ä»£çš„é”®å€¼å¯¹é›†åˆå¯ä»¥æ˜¯æ•°ç»„ã€Map æˆ–å…¶ä»–å®žçŽ°äº† `iterable` æŽ¥å£çš„å¯¹è±¡ã€‚

```js run
const arr = [
	['id', 1],
	['name', 'car'],
	['category', 'unknown'],
];

console.log(Object.fromEntries(arr));
```

### ðŸ”¥`Object.getOwnPropertyDescriptor()`

`Object.getOwnPropertyDescriptor()`æ–¹æ³•èŽ·å–æŸä¸ªå±žæ€§çš„ç‰¹æ€§ã€‚

```js run
const obj = {
	id: 1,
};

console.log(Object.getOwnPropertyDescriptor(obj, 'id'));
```

### `Object.getOwnPropertyDescriptors()`

`Object.getOwnpropertyDescriptors()`æ–¹æ³•èŽ·å–å¯¹è±¡ä¸Šæ‰€æœ‰å±žæ€§çš„ç‰¹æ€§ã€‚

```js run
const obj = {
	id: 1,
	type: 2,
};

console.log(Object.getOwnPropertyDescriptors(obj));
```

### `Object.getOwnPropertyNames()`

TODO

### ðŸ”¥`Object.getOwnPropertySymbols()`

`Object.getOwnPropertySymbols()`è¿”å›žå¯¹è±¡ä¸­çš„æ‰€æœ‰ `Symbol` å±žæ€§ã€‚

```js run
const s1 = Symbol();

const o = {
	id: 0,
};

o[s1] = '1';

// æ²¡æœ‰è¿”å›žo.id
console.log(Object.getOwnPropertySymbols(o));
```

### `Object.getPrototypeOf()`

`Object.getPrototypeOf()`æ–¹æ³•ç”¨äºŽèŽ·å–å¯¹è±¡çš„åŽŸåž‹ã€‚

```js run
const prototype = {};

const o1 = Object.create(prototype);

console.log(Object.getPrototypeOf(o1) === prototype);
console.log(Object.getPrototypeOf(o1) === o1.__proto__);
```

### ðŸ”¥`Object.is()`

`Object.is()`ç”¨äºŽæ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ã€‚

```js run
const o1 = {
	p1: true,
	p2: null,
	p3: 1,
	p4: 'str',
};

const o2 = {
	p1: true,
	p2: null,
	p3: 1,
	p4: 'str',
};

console.log(Object.is(o1, o2));
console.log(Object.is(o1.p1, o2.p1));
```

`Object.is()`å’Œ`==`ä¸åŒï¼Œ`==`ä¼šå…ˆå°è¯•å°†ä¸¤ä¸ªå€¼è½¬æ¢ä¸ºç›¸åŒç±»åž‹ï¼Œæ¯”å¦‚`"" == false`ç»“æžœä¸º `true`ã€‚`Object.is()`ä¸ä¼šè¿›è¡Œç±»åž‹è½¬æ¢ã€‚

`Object.is()`å’Œ`===`ä¹Ÿä¸åŒã€‚`===`ä¼šå°†`-0` å’Œ`+0` ç›¸ç­‰ï¼Œ`NaN` ä¸ç­‰äºŽ `NaN`ã€‚

```js run
console.log(Object.is(NaN, NaN)); //true
console.log(NaN === NaN); // false

console.log(Object.is(-0, +0)); // false
console.log(-0 === +0); //true
```

### `Object.isExtensible()`

TODO

### `Object.isFrozen()`

### `Object.isSealed()`

### `Object.keys()`

### `Object.preventExtensions()`

TODO

### `Object.seal()`

### `Object.setPrototypeOf()`

### `Object.values()`

## å®žä¾‹æ–¹æ³•

### `Object.prototype.__defineGetter__()`

TODO

### `Object.prototype.__defineSetter__()`

TODO

### `Object.prototype.__lookupGetter__()`

TODO

### `Object.prototype.__lookupSetter__()`

TODO

### `Object.prototype.hasOwnProperty()`

### `Object.prototype.isPrototypeOf()`

### `Object.prototype.propertyIsEnumerable()`

### `Object.prototype.toLocaleString()`

### `Object.prototype.toString()`

### `Object.prototype.unwatch()`

### `Object.prototype.valueOf()`

### `Object.prototype.watch()`

> -   [Object â€”â€” MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)
