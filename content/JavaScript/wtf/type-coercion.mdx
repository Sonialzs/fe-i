---
title: '类型转换'
slug: 'type-coercion'
date: '2020-11-24'
category: 'JavaScript'
index: 3
authors:
    - cuvii
authorsUrl:
    - https://fei.kodin.fun
draft: false
---

## 原始类型转换

### 转换为布尔值

显式转换为布尔值比较简单，调用 `Boolean()`就可以了。

在进行条件判断时，例如`if(x)`判断中，会对 `x` 的值进行隐式类型转换。

在 JavaScript 中，只有 **8** 个值会转换为 `false`，这 8 个值也是传说中的 `falsy` 值。

1.  `false`
2.  `null`
3.  `undefined`
4.  `NaN`
5.  `0`
6.  `-0`
7.  `+0`
8.  `""`（空字符串）

除此之外需要注意的两点是：

-   `Boolean()`，不传入参数时，默认为 `false`。
-   `[]`空数组是` true`，不是 `false` 哦。
-   ❗❗`document.all`在非 ie 下使用`typeof`检测为`undefined`，也会被转换为 `false`。在 HTML5 中这个 API 已经被废弃了，不会真的还有面试官问吧。

### 转换为数字

| 参数类型  |                                    结果                                    |
| :-------: | :------------------------------------------------------------------------: |
| undefined |                                    NaN                                     |
|   null    |                                     +0                                     |
|  boolean  |                           true 为 1，false 为+0                            |
|  number   |                                   原数字                                   |
|  string   | 纯数字的字符串(包括小数和负数、各进制的数)，会被转为相应的数字，否则为 NaN |
|  symbol   |                                    报错                                    |

表格取自[从 206 个 console.log()完全弄懂数据类型转换的前世今生(上)](https://juejin.cn/post/6844904105874472974#heading-14)

纯数字的字符串(包括小数和负数、各进制的数)，会被转为相应的数字。

`null` 转换为 `0`。

`true` 为 1,`false` 为`0`。

`Symbol` 会报错。

其他基本类型，包括非纯数字的字符串，`NaN`，`undefined` 都会被转换为 `NaN`。

#### parseInt 和 parseFloat

-   `parseInt()`将结果转换为整数。
-   `parseFloat()`将结果转换为小数。

二者的执行逻辑相似。

1.  跳过开头的所有空白字符串，从第一个非空白字符串开始解析。
2.  如果第一个字符串不是数字字面量（`0x` 和`-`是数字字面量嗷），返回 `NaN`。
3.  尽可能多解析，遇到第一个非字符串时返回前面已经解析的结果。例如`123abc`会返回 `123`,如果开头是`0x`或`-`，但是后面紧跟的不是数字，例如`-a`或者`0xa`也会返回`NaN`。

### 转换为字符串

| 参数类型  |       结果        |
| :-------: | :---------------: |
| undefined |    'undefined'    |
|   null    |      'null'       |
|  boolean  | 'true'或者'false' |
|    NaN    |       'NaN'       |
|  number   |    "数值本身"     |
|  Symbol   |    'Symbol(x)'    |

表格取自[从 206 个 console.log()完全弄懂数据类型转换的前世今生(上)](https://juejin.cn/post/6844904105874472974#heading-9)

### 转换为对象

#### String()

String()有两种用法：

-   当作构造函数调用：`new String(x)`：此时返回的是新创建的 `String` 对象。

```js run
typeof new String('cuvii');
```

-   当作普通函数调用：`String(x)`：此时返回的是将 x 转换为字符串后的结果，也就是说，直接调用`String()`是进行类型转换。

```js run
typeof String(123);
```

相似的还有 `Boolean()`和 `Number()`，具体可以查看[包装对象](/js/wtf/wrapper-object)。

#### Object()

`Object()`构造函数接收任意类型的变量，会根据变量类型做出不同的处理。
如果传入基本类型，那它会生成对应类型的包装对象。`null`和`undefined`除外，会被转换为空对象。

## 对象转换

### 对象转字符串

### 对象转数字

## 相关方法

### toPrimitive

### valueOf

### toString

## 其他情况

## 参考

> -   🔥[从 206 个 console.log()完全弄懂数据类型转换的前世今生(上)](https://juejin.cn/post/6844904105874472974)
> -   🔥[从 206 个 console.log()完全弄懂数据类型转换的前世今生(下)](https://juejin.cn/post/6844904114099322893)
> -   [JavaScript Type Conversions (casting)](https://flaviocopes.com/javascript-type-conversion/)
> -   [JavaScript Type Conversions](https://www.programiz.com/javascript/type-conversion)
